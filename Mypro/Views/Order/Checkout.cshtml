@model List<Mypro.Models.CartItem>
@{
    ViewData["Title"] = "Checkout";
    Layout = "~/Views/Shared/_Layout.cshtml";

    decimal subtotal = Convert.ToDecimal(ViewBag.SubTotal ?? 0m);
    decimal orderDiscPercent = Convert.ToDecimal(ViewBag.OrderDiscountPercent ?? 0m);
    decimal dateDiscPercent = Convert.ToDecimal(ViewBag.DateDiscountPercent ?? 0m);
    decimal totalDiscountAmount = Convert.ToDecimal(ViewBag.TotalDiscountAmount ?? 0m);
    decimal gstPercent = Convert.ToDecimal(ViewBag.GSTPercent ?? 2m);
    decimal gstAmount = Convert.ToDecimal(ViewBag.GSTAmount ?? 0m);
    decimal finalAmount = Convert.ToDecimal(ViewBag.FinalAmount ?? 0m);

    decimal orderDiscountAmount = Math.Round(subtotal * orderDiscPercent / 100m, 2);
    decimal dateDiscountAmount = Math.Round(subtotal * dateDiscPercent / 100m, 2);
}

<div class="checkout-container container my-1">
    <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 20px;">

        <a href="javascript:history.back()"
           style="
       position: absolute;
       display: inline-flex;
       align-items: center;
       justify-content: center;
       width: 45px;
       height: 45px;
       border-radius: 50%;
       background-color: lightcoral;
       color: #000;
       font-size: 22px;
       font-weight: bold;
       text-decoration: none;
       box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
       left: 7%;
       transition: all 0.3s ease;
       z-index: 100;
   "
           onmouseover="this.style.backgroundColor='#e0e0e0'; this.style.transform='scale(1.1)';"
           onmouseout="this.style.backgroundColor='lightcoral'; this.style.transform='scale(1)';">
            ←
        </a>



        <h3 class="fw-bold"
            style="flex: 1; text-align: center; color: #000; font-family: 'Playfair Display', serif; font-size: 2.5rem; letter-spacing: 1px; text-transform: uppercase; margin: 0;">
            Checkout
        </h3>


        <div style="width: 40px;"></div>
    </div>

 

        <div class="row g-4">
            <!-- Billing / Shipping Form -->
            <div class="col-lg-7">
                <div class="card shadow-lg p-4 rounded-4 h-100">
                    <h4 class="fw-bold mb-3">Billing Information</h4>
                    <form asp-action="PlaceOrder" asp-controller="Order" method="post">
                        <div class="mb-3">
                            <label class="form-label fw-bold">Full Name</label>
                            <input type="text" name="FullName" class="form-control" required />
                        </div>
                        <div class="mb-3">
                            <label class="form-label fw-bold">Email</label>
                            <input type="email" name="Email" class="form-control" required />
                        </div>
                        <div class="mb-3">
                            <label class="form-label fw-bold">Phone</label>
                            <input type="text" name="Phone" class="form-control" required />
                        </div>
                        <div class="mb-3">
                            <label class="form-label fw-bold">Address</label>
                            <textarea name="Address" class="form-control" rows="3" required></textarea>
                        </div>

                        <h5 class="fw-bold mt-4 mb-3">Payment Method</h5>
                        <div class="form-check mb-2">
                            <input type="radio" id="cod" name="PaymentMethod" value="Cash on Delivery" class="form-check-input" checked>
                            <label for="cod" class="form-check-label">Cash on Delivery</label>
                        </div>
                        <div class="form-check mb-2">
                            <input type="radio" id="upi" name="PaymentMethod" value="UPI" class="form-check-input">
                            <label for="upi" class="form-check-label">UPI</label>
                        </div>
                        <div class="form-check mb-2">
                            <input type="radio" id="card" name="PaymentMethod" value="Card" class="form-check-input">
                            <label for="card" class="form-check-label">Credit / Debit Card</label>
                        </div>
                        <div class="form-check">
                            <input type="radio" id="netbanking" name="PaymentMethod" value="Net Banking" class="form-check-input">
                            <label for="netbanking" class="form-check-label">Net Banking</label>
                        </div>

                        <button type="submit" class="btn btn-success w-100 mt-4 fw-bold py-2 rounded-pill">
                            Confirm Order
                        </button>
                    </form>
                </div>
            </div>

            <!-- Order Summary -->
        <div class="col-lg-5">
            <div class="card shadow-lg p-4 rounded-4 ">
                <h4 class="fw-bold mb-3">Order Summary</h4>

                @foreach (var item in Model)
                {
                    <div class="d-flex justify-content-between align-items-center mb-2 border-bottom pb-2">
                        <span>@item.Image.Category.CategoryName (x @item.Quantity)</span>
                        <span>₹@(item.Price* item.Quantity)</span>
                    </div>
                }

                <div class="d-flex justify-content-between mt-3">
                    <span>Total MRP:</span>
                    <span id="total-mrp">₹@subtotal</span>
                </div>

                <div class="d-flex justify-content-between text-danger">
                    <span>Order Discount (@orderDiscPercent%):</span>
                    <span id="order-discount-amount">-₹@orderDiscountAmount</span>
                </div>

                <div class="d-flex justify-content-between text-danger">
                    <span>Date Discount (@dateDiscPercent%):</span>
                    <span id="date-discount-amount">-₹@dateDiscountAmount</span>
                </div>

                <hr />
                <div class="d-flex justify-content-between text-danger">
                    <span>Total Discount:</span>
                    <span id="total-discount-amount">-₹@totalDiscountAmount</span>
                </div>

                <div class="d-flex justify-content-between text-primary">
                    <span>GST (@gstPercent%):</span>
                    <span id="gst-amount">₹@gstAmount</span>
                </div>

                <hr />
                <div class="d-flex justify-content-between fw-bold fs-5">
                    <span>TOTAL AMOUNT:</span>
                    <span id="total-amount">₹@finalAmount</span>
                </div>
            </div>
        </div>



        </div>
    


<style>
    .checkout-container h2 {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        color: #333;
    }

    .text-gradient {
        background: linear-gradient(45deg, #ff416c, #ff4b2b);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
    }

    .card {
        border: none;
        background: #fff;
    }

    body.theme-dark .card {
        background: #1e1e1e;
        color: white;
    }
</style>
